<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <!-- 背景 -->
  <rect width="800" height="500" fill="#f8f9fa" />

  <!-- タイトル -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold"
    text-anchor="middle">畳み込み演算の詳細</text>

  <!-- 入力画像マトリックス -->
  <rect x="100" y="100" width="240" height="240" rx="5" fill="#ffedd5" stroke="#c2410c" stroke-width="2" />
  <text x="220" y="90" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle"
    fill="#c2410c">入力特徴マップ</text>

  <!-- 入力画像の格子 -->
  <line x1="140" y1="100" x2="140" y2="340" stroke="#c2410c" stroke-width="1" />
  <line x1="180" y1="100" x2="180" y2="340" stroke="#c2410c" stroke-width="1" />
  <line x1="220" y1="100" x2="220" y2="340" stroke="#c2410c" stroke-width="1" />
  <line x1="260" y1="100" x2="260" y2="340" stroke="#c2410c" stroke-width="1" />
  <line x1="300" y1="100" x2="300" y2="340" stroke="#c2410c" stroke-width="1" />

  <line x1="100" y1="140" x2="340" y2="140" stroke="#c2410c" stroke-width="1" />
  <line x1="100" y1="180" x2="340" y2="180" stroke="#c2410c" stroke-width="1" />
  <line x1="100" y1="220" x2="340" y2="220" stroke="#c2410c" stroke-width="1" />
  <line x1="100" y1="260" x2="340" y2="260" stroke="#c2410c" stroke-width="1" />
  <line x1="100" y1="300" x2="340" y2="300" stroke="#c2410c" stroke-width="1" />

  <!-- 入力画像の値（一部だけ表示） -->
  <text x="120" y="120" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="160" y="120" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="200" y="120" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">1</text>
  <text x="240" y="120" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">1</text>
  <text x="280" y="120" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>

  <text x="120" y="160" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="160" y="160" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="200" y="160" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">1</text>
  <text x="240" y="160" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">1</text>
  <text x="280" y="160" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>

  <text x="120" y="200" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="160" y="200" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="200" y="200" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">1</text>
  <text x="240" y="200" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">1</text>
  <text x="280" y="200" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>

  <text x="120" y="240" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="160" y="240" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="200" y="240" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">1</text>
  <text x="240" y="240" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">1</text>
  <text x="280" y="240" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>

  <text x="120" y="280" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="160" y="280" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="200" y="280" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">1</text>
  <text x="240" y="280" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">1</text>
  <text x="280" y="280" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>

  <text x="120" y="320" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="160" y="320" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="200" y="320" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="240" y="320" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>
  <text x="280" y="320" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">0</text>

  <!-- 現在適用されているフィルタの領域をハイライト -->
  <rect x="140" y="140" width="120" height="120" fill="rgba(59, 130, 246, 0.2)" stroke="#3b82f6" stroke-width="2"
    stroke-dasharray="5,5" />

  <!-- フィルタ -->
  <rect x="400" y="160" width="120" height="120" rx="5" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" />
  <text x="460" y="150" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle"
    fill="#3b82f6">フィルタ (カーネル)</text>

  <!-- フィルタの格子 -->
  <line x1="440" y1="160" x2="440" y2="280" stroke="#3b82f6" stroke-width="1" />
  <line x1="480" y1="160" x2="480" y2="280" stroke="#3b82f6" stroke-width="1" />

  <line x1="400" y1="200" x2="520" y2="200" stroke="#3b82f6" stroke-width="1" />
  <line x1="400" y1="240" x2="520" y2="240" stroke="#3b82f6" stroke-width="1" />

  <!-- フィルタの値 -->
  <text x="420" y="180" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#3b82f6">1</text>
  <text x="460" y="180" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#3b82f6">0</text>
  <text x="500" y="180" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#3b82f6">1</text>

  <text x="420" y="220" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#3b82f6">0</text>
  <text x="460" y="220" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#3b82f6">1</text>
  <text x="500" y="220" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#3b82f6">0</text>

  <text x="420" y="260" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#3b82f6">1</text>
  <text x="460" y="260" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#3b82f6">0</text>
  <text x="500" y="260" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#3b82f6">1</text>

  <!-- 畳み込み計算の矢印 -->
  <line x1="270" y1="200" x2="390" y2="200" stroke="#64748b" stroke-width="1.5" stroke-dasharray="5,5" />
  <line x1="390" y1="200" x2="380" y2="195" stroke="#64748b" stroke-width="1.5" />
  <line x1="390" y1="200" x2="380" y2="205" stroke="#64748b" stroke-width="1.5" />

  <line x1="460" y1="290" x2="460" y2="330" stroke="#64748b" stroke-width="1.5" stroke-dasharray="5,5" />
  <line x1="460" y1="330" x2="455" y2="320" stroke="#64748b" stroke-width="1.5" />
  <line x1="460" y1="330" x2="465" y2="320" stroke="#64748b" stroke-width="1.5" />

  <!-- 計算プロセス -->
  <rect x="360" y="340" width="200" height="120" rx="5" fill="#f1f5f9" stroke="#64748b" stroke-width="1" />
  <text x="460" y="365" font-family="Arial, sans-serif" font-size="16" font-weight="bold"
    text-anchor="middle">畳み込み計算</text>

  <text x="400" y="395" font-family="Arial, sans-serif" font-size="14" text-anchor="start">0×1 + 0×0 + 1×1 +</text>
  <text x="400" y="415" font-family="Arial, sans-serif" font-size="14" text-anchor="start">0×0 + 1×1 + 1×0 +</text>
  <text x="400" y="435" font-family="Arial, sans-serif" font-size="14" text-anchor="start">0×1 + 0×0 + 1×1 = 4</text>

  <!-- 出力特徴マップ -->
  <rect x="600" y="160" width="160" height="160" rx="5" fill="#dcfce7" stroke="#22c55e" stroke-width="2" />
  <text x="680" y="150" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle"
    fill="#22c55e">出力特徴マップ</text>

  <!-- 出力特徴マップの格子 -->
  <line x1="633" y1="160" x2="633" y2="320" stroke="#22c55e" stroke-width="1" />
  <line x1="666" y1="160" x2="666" y2="320" stroke="#22c55e" stroke-width="1" />
  <line x1="700" y1="160" x2="700" y2="320" stroke="#22c55e" stroke-width="1" />

  <line x1="600" y1="193" x2="760" y2="193" stroke="#22c55e" stroke-width="1" />
  <line x1="600" y1="226" x2="760" y2="226" stroke="#22c55e" stroke-width="1" />
  <line x1="600" y1="260" x2="760" y2="260" stroke="#22c55e" stroke-width="1" />
  <line x1="600" y1="293" x2="760" y2="293" stroke="#22c55e" stroke-width="1" />

  <!-- 出力特徴マップの値（一部） -->
  <text x="617" y="177" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">3</text>
  <text x="650" y="177" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">4</text>
  <text x="683" y="177" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">3</text>
  <text x="717" y="177" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">1</text>

  <text x="617" y="210" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">2</text>
  <text x="650" y="210" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">4</text>
  <text x="683" y="210" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">3</text>
  <text x="717" y="210" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">1</text>

  <text x="617" y="243" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">2</text>
  <text x="650" y="243" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">4</text>
  <text x="683" y="243" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">3</text>
  <text x="717" y="243" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">1</text>

  <text x="617" y="276" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">1</text>
  <text x="650" y="276" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">2</text>
  <text x="683" y="276" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">2</text>
  <text x="717" y="276" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">1</text>

  <text x="617" y="310" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">0</text>
  <text x="650" y="310" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">0</text>
  <text x="683" y="310" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">0</text>
  <text x="717" y="310" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#22c55e">0</text>

  <!-- 結果の矢印 -->
  <line x1="540" y1="220" x2="590" y2="220" stroke="#64748b" stroke-width="1.5" />
  <polygon points="580,220 590,215 590,225" fill="#64748b" />

  <!-- 畳み込みの特徴説明 -->
  <rect x="100" y="400" width="600" height="80" rx="5" fill="#f1f5f9" stroke="#64748b" stroke-width="1" />
  <text x="400" y="425" font-family="Arial, sans-serif" font-size="14" font-weight="bold"
    text-anchor="middle">畳み込み演算の特徴</text>
  <text x="130" y="450" font-family="Arial, sans-serif" font-size="12" text-anchor="start">• パラメータ共有：同じフィルタが入力全体をスキャン →
    パラメータ数の削減</text>
  <text x="130" y="470" font-family="Arial, sans-serif" font-size="12" text-anchor="start">• 局所的特徴抽出：各出力値は入力の局所領域にのみ依存 →
    空間的局所性の活用</text>
</svg>
