<svg viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <!-- 定義 -->
  <defs>
    <linearGradient id="rootGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="internalGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f39c12;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d68910;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="leafGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#27ae60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#229954;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="0" dy="3" stdDeviation="4" flood-opacity="0.2"/>
    </filter>
  </defs>
  
  <!-- 背景 -->
  <rect width="900" height="700" fill="#f8f9fa"/>
  
  <!-- タイトル -->
  <text x="450" y="40" text-anchor="middle" fill="#2c3e50" font-size="26" font-weight="bold">
    B-Tree インデックス構造
  </text>
  
  <!-- ルートノード -->
  <g transform="translate(350, 100)">
    <rect width="200" height="60" fill="url(#rootGrad)" rx="10" filter="url(#shadow)"/>
    <text x="100" y="20" text-anchor="middle" fill="white" font-size="14" font-weight="bold">
      ルートノード
    </text>
    <line x1="10" y1="30" x2="190" y2="30" stroke="white" stroke-width="1"/>
    <text x="33" y="48" text-anchor="middle" fill="white" font-size="16" font-weight="bold">50</text>
    <line x1="66" y1="35" x2="66" y2="55" stroke="white" stroke-width="1"/>
    <text x="100" y="48" text-anchor="middle" fill="white" font-size="16" font-weight="bold">100</text>
    <line x1="134" y1="35" x2="134" y2="55" stroke="white" stroke-width="1"/>
    <text x="167" y="48" text-anchor="middle" fill="white" font-size="16" font-weight="bold">150</text>
  </g>
  
  <!-- 内部ノード（第2レベル） -->
  <!-- 左ノード -->
  <g transform="translate(100, 220)">
    <rect width="160" height="50" fill="url(#internalGrad)" rx="8" filter="url(#shadow)"/>
    <text x="80" y="18" text-anchor="middle" fill="white" font-size="12" font-weight="bold">
      内部ノード
    </text>
    <line x1="10" y1="25" x2="150" y2="25" stroke="white" stroke-width="1"/>
    <text x="40" y="42" text-anchor="middle" fill="white" font-size="14" font-weight="bold">20</text>
    <line x1="80" y1="30" x2="80" y2="45" stroke="white" stroke-width="1"/>
    <text x="120" y="42" text-anchor="middle" fill="white" font-size="14" font-weight="bold">35</text>
  </g>
  
  <!-- 中央ノード -->
  <g transform="translate(370, 220)">
    <rect width="160" height="50" fill="url(#internalGrad)" rx="8" filter="url(#shadow)"/>
    <text x="80" y="18" text-anchor="middle" fill="white" font-size="12" font-weight="bold">
      内部ノード
    </text>
    <line x1="10" y1="25" x2="150" y2="25" stroke="white" stroke-width="1"/>
    <text x="40" y="42" text-anchor="middle" fill="white" font-size="14" font-weight="bold">70</text>
    <line x1="80" y1="30" x2="80" y2="45" stroke="white" stroke-width="1"/>
    <text x="120" y="42" text-anchor="middle" fill="white" font-size="14" font-weight="bold">85</text>
  </g>
  
  <!-- 右ノード -->
  <g transform="translate(640, 220)">
    <rect width="160" height="50" fill="url(#internalGrad)" rx="8" filter="url(#shadow)"/>
    <text x="80" y="18" text-anchor="middle" fill="white" font-size="12" font-weight="bold">
      内部ノード
    </text>
    <line x1="10" y1="25" x2="150" y2="25" stroke="white" stroke-width="1"/>
    <text x="40" y="42" text-anchor="middle" fill="white" font-size="14" font-weight="bold">120</text>
    <line x1="80" y1="30" x2="80" y2="45" stroke="white" stroke-width="1"/>
    <text x="120" y="42" text-anchor="middle" fill="white" font-size="14" font-weight="bold">135</text>
  </g>
  
  <!-- リーフノード -->
  <!-- 1番目 -->
  <g transform="translate(20, 350)">
    <rect width="100" height="80" fill="url(#leafGrad)" rx="8" filter="url(#shadow)"/>
    <text x="50" y="18" text-anchor="middle" fill="white" font-size="11" font-weight="bold">
      リーフノード
    </text>
    <line x1="10" y1="25" x2="90" y2="25" stroke="white" stroke-width="1"/>
    <text x="50" y="40" text-anchor="middle" fill="white" font-size="11">10,12,15</text>
    <line x1="10" y1="48" x2="90" y2="48" stroke="white" stroke-width="1"/>
    <text x="50" y="62" text-anchor="middle" fill="white" font-size="9">ROWID:</text>
    <text x="50" y="72" text-anchor="middle" fill="white" font-size="9">0x123...</text>
  </g>
  
  <!-- 2番目 -->
  <g transform="translate(140, 350)">
    <rect width="100" height="80" fill="url(#leafGrad)" rx="8" filter="url(#shadow)"/>
    <text x="50" y="18" text-anchor="middle" fill="white" font-size="11" font-weight="bold">
      リーフノード
    </text>
    <line x1="10" y1="25" x2="90" y2="25" stroke="white" stroke-width="1"/>
    <text x="50" y="40" text-anchor="middle" fill="white" font-size="11">22,25,30</text>
    <line x1="10" y1="48" x2="90" y2="48" stroke="white" stroke-width="1"/>
    <text x="50" y="62" text-anchor="middle" fill="white" font-size="9">ROWID:</text>
    <text x="50" y="72" text-anchor="middle" fill="white" font-size="9">0x456...</text>
  </g>
  
  <!-- 3番目以降も同様に配置 -->
  <g transform="translate(260, 350)">
    <rect width="100" height="80" fill="url(#leafGrad)" rx="8" filter="url(#shadow)"/>
    <text x="50" y="40" text-anchor="middle" fill="white" font-size="11">40,42,45</text>
  </g>
  
  <g transform="translate(380, 350)">
    <rect width="100" height="80" fill="url(#leafGrad)" rx="8" filter="url(#shadow)"/>
    <text x="50" y="40" text-anchor="middle" fill="white" font-size="11">55,60,65</text>
  </g>
  
  <g transform="translate(500, 350)">
    <rect width="100" height="80" fill="url(#leafGrad)" rx="8" filter="url(#shadow)"/>
    <text x="50" y="40" text-anchor="middle" fill="white" font-size="11">75,78,80</text>
  </g>
  
  <g transform="translate(620, 350)">
    <rect width="100" height="80" fill="url(#leafGrad)" rx="8" filter="url(#shadow)"/>
    <text x="50" y="40" text-anchor="middle" fill="white" font-size="11">88,90,95</text>
  </g>
  
  <g transform="translate(740, 350)">
    <rect width="100" height="80" fill="url(#leafGrad)" rx="8" filter="url(#shadow)"/>
    <text x="50" y="40" text-anchor="middle" fill="white" font-size="11">105,110</text>
  </g>
  
  <!-- 接続線 -->
  <!-- ルートから内部ノードへ -->
  <line x1="400" y1="160" x2="180" y2="220" stroke="#34495e" stroke-width="2"/>
  <line x1="450" y1="160" x2="450" y2="220" stroke="#34495e" stroke-width="2"/>
  <line x1="500" y1="160" x2="720" y2="220" stroke="#34495e" stroke-width="2"/>
  
  <!-- 内部ノードからリーフへ -->
  <line x1="140" y1="270" x2="70" y2="350" stroke="#34495e" stroke-width="2"/>
  <line x1="180" y1="270" x2="190" y2="350" stroke="#34495e" stroke-width="2"/>
  <line x1="220" y1="270" x2="310" y2="350" stroke="#34495e" stroke-width="2"/>
  
  <line x1="410" y1="270" x2="430" y2="350" stroke="#34495e" stroke-width="2"/>
  <line x1="450" y1="270" x2="550" y2="350" stroke="#34495e" stroke-width="2"/>
  <line x1="490" y1="270" x2="670" y2="350" stroke="#34495e" stroke-width="2"/>
  
  <line x1="680" y1="270" x2="790" y2="350" stroke="#34495e" stroke-width="2"/>
  
  <!-- リーフノード間のポインタ -->
  <path d="M 120 390 L 140 390" stroke="#27ae60" stroke-width="2" stroke-dasharray="3,3"/>
  <path d="M 240 390 L 260 390" stroke="#27ae60" stroke-width="2" stroke-dasharray="3,3"/>
  <path d="M 360 390 L 380 390" stroke="#27ae60" stroke-width="2" stroke-dasharray="3,3"/>
  <path d="M 480 390 L 500 390" stroke="#27ae60" stroke-width="2" stroke-dasharray="3,3"/>
  <path d="M 600 390 L 620 390" stroke="#27ae60" stroke-width="2" stroke-dasharray="3,3"/>
  <path d="M 720 390 L 740 390" stroke="#27ae60" stroke-width="2" stroke-dasharray="3,3"/>
  
  <!-- 検索例 -->
  <g transform="translate(50, 480)">
    <rect width="800" height="100" fill="#ecf0f1" rx="10" filter="url(#shadow)"/>
    <text x="400" y="25" text-anchor="middle" font-size="16" fill="#2c3e50" font-weight="bold">
      検索例: キー値 "78" を検索
    </text>
    <text x="50" y="50" font-size="14" fill="#e74c3c">1. ルート: 78 は 50 &lt; 78 &lt; 100 → 中央の子ノードへ</text>
    <text x="50" y="70" font-size="14" fill="#f39c12">2. 内部ノード: 78 は 70 &lt; 78 &lt; 85 → 中央の子ノードへ</text>
    <text x="50" y="90" font-size="14" fill="#27ae60">3. リーフノード: 75,78,80 の中から 78 を発見 → ROWIDでデータアクセス</text>
  </g>
  
  <!-- B-Treeの特徴 -->
  <g transform="translate(50, 600)">
    <rect width="380" height="80" fill="#e8f6f3" rx="10" filter="url(#shadow)"/>
    <text x="190" y="25" text-anchor="middle" font-size="16" fill="#27ae60" font-weight="bold">
      B-Treeの特徴
    </text>
    <text x="20" y="45" font-size="12" fill="#2c3e50">✓ すべてのリーフが同じ深さ（バランス木）</text>
    <text x="20" y="65" font-size="12" fill="#2c3e50">✓ 検索・挿入・削除が O(log n)</text>
  </g>
  
  <g transform="translate(470, 600)">
    <rect width="380" height="80" fill="#fef9e7" rx="10" filter="url(#shadow)"/>
    <text x="190" y="25" text-anchor="middle" font-size="16" fill="#f39c12" font-weight="bold">
      ノードサイズ
    </text>
    <text x="20" y="45" font-size="12" fill="#2c3e50">• 通常はページサイズと同じ（8KB〜16KB）</text>
    <text x="20" y="65" font-size="12" fill="#2c3e50">• 1ノードに数百〜数千のキーを格納可能</text>
  </g>
</svg>