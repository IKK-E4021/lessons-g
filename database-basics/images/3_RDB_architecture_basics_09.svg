<svg viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <!-- 定義 -->
  <defs>
    <linearGradient id="redoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f093fb;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f5576c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="undoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="timelineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#a8edea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fed6e3;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="0" dy="3" stdDeviation="5" flood-opacity="0.2"/>
    </filter>
  </defs>
  
  <!-- 背景 -->
  <rect width="900" height="700" fill="#f8f9fa"/>
  
  <!-- タイトル -->
  <text x="450" y="40" text-anchor="middle" fill="#2c3e50" font-size="26" font-weight="bold">
    REDOログとUNDOログの比較
  </text>
  
  <!-- タイムライン -->
  <g transform="translate(50, 100)">
    <rect width="800" height="60" fill="url(#timelineGradient)" rx="10" filter="url(#shadow)"/>
    <text x="400" y="25" text-anchor="middle" fill="#2c3e50" font-size="14" font-weight="bold">
      トランザクションのタイムライン
    </text>
    <line x1="50" y1="40" x2="750" y2="40" stroke="#2c3e50" stroke-width="2"/>
    
    <!-- タイムラインのポイント -->
    <circle cx="150" cy="40" r="5" fill="#2c3e50"/>
    <text x="150" y="55" text-anchor="middle" font-size="10" fill="#2c3e50">BEGIN</text>
    
    <circle cx="300" cy="40" r="5" fill="#2c3e50"/>
    <text x="300" y="55" text-anchor="middle" font-size="10" fill="#2c3e50">UPDATE</text>
    
    <circle cx="450" cy="40" r="5" fill="#2c3e50"/>
    <text x="450" y="55" text-anchor="middle" font-size="10" fill="#2c3e50">UPDATE</text>
    
    <circle cx="600" cy="40" r="5" fill="#27ae60"/>
    <text x="600" y="55" text-anchor="middle" font-size="10" fill="#27ae60">COMMIT</text>
    
    <circle cx="700" cy="40" r="5" fill="#e74c3c"/>
    <text x="700" y="55" text-anchor="middle" font-size="10" fill="#e74c3c">CRASH</text>
  </g>
  
  <!-- 左側：REDOログ -->
  <g transform="translate(50, 200)">
    <rect width="380" height="400" fill="url(#redoGradient)" rx="15" filter="url(#shadow)"/>
    <text x="190" y="30" text-anchor="middle" fill="white" font-size="20" font-weight="bold">
      REDOログ（前進復旧）
    </text>
    
    <!-- 目的 -->
    <g transform="translate(20, 60)">
      <rect width="340" height="60" fill="white" rx="10" opacity="0.9"/>
      <text x="170" y="20" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">
        目的
      </text>
      <text x="170" y="40" text-anchor="middle" font-size="12" fill="#2c3e50">
        コミット済み変更の再実行
      </text>
      <text x="170" y="55" text-anchor="middle" font-size="11" fill="#7f8c8d">
        "やり直し"による前進復旧
      </text>
    </g>
    
    <!-- 記録内容 -->
    <g transform="translate(20, 140)">
      <rect width="340" height="80" fill="white" rx="10" opacity="0.9"/>
      <text x="170" y="20" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">
        記録内容（After Image）
      </text>
      <rect x="20" y="30" width="300" height="20" fill="#ffeeee" rx="5"/>
      <text x="170" y="45" text-anchor="middle" font-size="11" fill="#c0392b">
        LSN:1001 Page:A Value:"新しい値1"
      </text>
      <rect x="20" y="55" width="300" height="20" fill="#ffeeee" rx="5"/>
      <text x="170" y="70" text-anchor="middle" font-size="11" fill="#c0392b">
        LSN:1002 Page:B Value:"新しい値2"
      </text>
    </g>
    
    <!-- 使用場面 -->
    <g transform="translate(20, 240)">
      <rect width="340" height="60" fill="white" rx="10" opacity="0.9"/>
      <text x="170" y="20" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">
        使用場面
      </text>
      <text x="170" y="40" text-anchor="middle" font-size="12" fill="#2c3e50">
        システムクラッシュ後の復旧
      </text>
      <text x="170" y="55" text-anchor="middle" font-size="11" fill="#7f8c8d">
        電源断、OS障害、DBクラッシュ
      </text>
    </g>
    
    <!-- 保持期間 -->
    <g transform="translate(20, 320)">
      <rect width="340" height="60" fill="white" rx="10" opacity="0.9"/>
      <text x="170" y="20" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">
        保持期間
      </text>
      <text x="170" y="40" text-anchor="middle" font-size="12" fill="#2c3e50">
        循環利用またはアーカイブ保存
      </text>
      <text x="170" y="55" text-anchor="middle" font-size="11" fill="#7f8c8d">
        バックアップ・リカバリ用に長期保管
      </text>
    </g>
  </g>
  
  <!-- 右側：UNDOログ -->
  <g transform="translate(470, 200)">
    <rect width="380" height="400" fill="url(#undoGradient)" rx="15" filter="url(#shadow)"/>
    <text x="190" y="30" text-anchor="middle" fill="white" font-size="20" font-weight="bold">
      UNDOログ（後退復旧）
    </text>
    
    <!-- 目的 -->
    <g transform="translate(20, 60)">
      <rect width="340" height="60" fill="white" rx="10" opacity="0.9"/>
      <text x="170" y="20" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">
        目的
      </text>
      <text x="170" y="40" text-anchor="middle" font-size="12" fill="#2c3e50">
        未コミット変更の取り消し
      </text>
      <text x="170" y="55" text-anchor="middle" font-size="11" fill="#7f8c8d">
        "元に戻す"による後退復旧
      </text>
    </g>
    
    <!-- 記録内容 -->
    <g transform="translate(20, 140)">
      <rect width="340" height="80" fill="white" rx="10" opacity="0.9"/>
      <text x="170" y="20" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">
        記録内容（Before Image）
      </text>
      <rect x="20" y="30" width="300" height="20" fill="#eeeeff" rx="5"/>
      <text x="170" y="45" text-anchor="middle" font-size="11" fill="#2980b9">
        TXN:100 Page:A Value:"元の値1"
      </text>
      <rect x="20" y="55" width="300" height="20" fill="#eeeeff" rx="5"/>
      <text x="170" y="70" text-anchor="middle" font-size="11" fill="#2980b9">
        TXN:100 Page:B Value:"元の値2"
      </text>
    </g>
    
    <!-- 使用場面 -->
    <g transform="translate(20, 240)">
      <rect width="340" height="60" fill="white" rx="10" opacity="0.9"/>
      <text x="170" y="20" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">
        使用場面
      </text>
      <text x="170" y="40" text-anchor="middle" font-size="12" fill="#2c3e50">
        ROLLBACK / MVCC / 読み取り一貫性
      </text>
      <text x="170" y="55" text-anchor="middle" font-size="11" fill="#7f8c8d">
        トランザクション分離レベルの実現
      </text>
    </g>
    
    <!-- 保持期間 -->
    <g transform="translate(20, 320)">
      <rect width="340" height="60" fill="white" rx="10" opacity="0.9"/>
      <text x="170" y="20" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">
        保持期間
      </text>
      <text x="170" y="40" text-anchor="middle" font-size="12" fill="#2c3e50">
        トランザクション完了後も一定期間保持
      </text>
      <text x="170" y="55" text-anchor="middle" font-size="11" fill="#7f8c8d">
        読み取り一貫性のために必要
      </text>
    </g>
  </g>
  
  <!-- 復旧シナリオ -->
  <g transform="translate(100, 630)">
    <rect width="700" height="50" fill="#34495e" rx="10" filter="url(#shadow)"/>
    <text x="350" y="20" text-anchor="middle" fill="white" font-size="14" font-weight="bold">
      クラッシュリカバリの動作
    </text>
    <text x="350" y="40" text-anchor="middle" fill="white" font-size="12">
      1. UNDOログで未コミットトランザクションをロールバック → 2. REDOログでコミット済みトランザクションを再実行
    </text>
  </g>
</svg>