<svg viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <!-- 定義 -->
  <defs>
    <linearGradient id="extentGrad1" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="extentGrad2" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f093fb;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f5576c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="extentGrad3" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="pageGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#a8edea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fed6e3;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="segmentGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fa709a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fee140;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="0" dy="3" stdDeviation="5" flood-opacity="0.2"/>
    </filter>
  </defs>
  
  <!-- 背景 -->
  <rect width="900" height="700" fill="#f8f9fa"/>
  
  <!-- タイトル -->
  <text x="450" y="40" text-anchor="middle" fill="#2c3e50" font-size="26" font-weight="bold">
    エクステントによる領域管理
  </text>
  
  <!-- エクステントの概念図 -->
  <g transform="translate(50, 100)">
    <text x="400" y="-10" text-anchor="middle" font-size="20" fill="#2c3e50" font-weight="bold">
      エクステントの構造（1エクステント = 8ページ）
    </text>
    
    <!-- エクステント1 -->
    <g transform="translate(0, 30)">
      <rect width="800" height="80" fill="url(#extentGrad1)" rx="10" filter="url(#shadow)"/>
      <text x="20" y="25" fill="white" font-size="14" font-weight="bold">エクステント1</text>
      
      <!-- ページ -->
      <g transform="translate(20, 35)">
        <rect x="0" y="0" width="90" height="35" fill="url(#pageGrad)" rx="5"/>
        <text x="45" y="23" text-anchor="middle" font-size="11" fill="#2c3e50">ページ1</text>
        
        <rect x="95" y="0" width="90" height="35" fill="url(#pageGrad)" rx="5"/>
        <text x="140" y="23" text-anchor="middle" font-size="11" fill="#2c3e50">ページ2</text>
        
        <rect x="190" y="0" width="90" height="35" fill="url(#pageGrad)" rx="5"/>
        <text x="235" y="23" text-anchor="middle" font-size="11" fill="#2c3e50">ページ3</text>
        
        <rect x="285" y="0" width="90" height="35" fill="url(#pageGrad)" rx="5"/>
        <text x="330" y="23" text-anchor="middle" font-size="11" fill="#2c3e50">ページ4</text>
        
        <rect x="380" y="0" width="90" height="35" fill="url(#pageGrad)" rx="5"/>
        <text x="425" y="23" text-anchor="middle" font-size="11" fill="#2c3e50">ページ5</text>
        
        <rect x="475" y="0" width="90" height="35" fill="url(#pageGrad)" rx="5"/>
        <text x="520" y="23" text-anchor="middle" font-size="11" fill="#2c3e50">ページ6</text>
        
        <rect x="570" y="0" width="90" height="35" fill="url(#pageGrad)" rx="5"/>
        <text x="615" y="23" text-anchor="middle" font-size="11" fill="#2c3e50">ページ7</text>
        
        <rect x="665" y="0" width="90" height="35" fill="url(#pageGrad)" rx="5"/>
        <text x="710" y="23" text-anchor="middle" font-size="11" fill="#2c3e50">ページ8</text>
      </g>
      
      <text x="780" y="60" text-anchor="end" fill="white" font-size="12">64KB</text>
    </g>
  </g>
  
  <!-- テーブルの成長過程 -->
  <g transform="translate(50, 250)">
    <text x="400" y="-10" text-anchor="middle" font-size="20" fill="#2c3e50" font-weight="bold">
      テーブルの成長とエクステント割り当て
    </text>
    
    <!-- 初期状態 -->
    <g transform="translate(0, 30)">
      <text x="0" y="15" font-size="14" fill="#2c3e50" font-weight="bold">初期状態（小さなテーブル）</text>
      <rect x="0" y="25" width="200" height="50" fill="#ecf0f1" rx="8" filter="url(#shadow)"/>
      <rect x="10" y="35" width="80" height="30" fill="url(#extentGrad2)" rx="5"/>
      <text x="50" y="55" text-anchor="middle" fill="white" font-size="11">混合エクステント</text>
      <text x="120" y="55" font-size="11" fill="#7f8c8d">（複数テーブルで共有）</text>
    </g>
    
    <!-- 成長段階 -->
    <g transform="translate(0, 100)">
      <text x="0" y="15" font-size="14" fill="#2c3e50" font-weight="bold">成長段階（中規模テーブル）</text>
      <rect x="0" y="25" width="400" height="50" fill="#ecf0f1" rx="8" filter="url(#shadow)"/>
      <rect x="10" y="35" width="80" height="30" fill="url(#extentGrad1)" rx="5"/>
      <text x="50" y="55" text-anchor="middle" fill="white" font-size="11">統一エクステント1</text>
      <rect x="100" y="35" width="80" height="30" fill="url(#extentGrad1)" rx="5"/>
      <text x="140" y="55" text-anchor="middle" fill="white" font-size="11">統一エクステント2</text>
      <rect x="190" y="35" width="80" height="30" fill="url(#extentGrad1)" rx="5"/>
      <text x="230" y="55" text-anchor="middle" fill="white" font-size="11">統一エクステント3</text>
      <text x="290" y="55" font-size="11" fill="#7f8c8d">（専用エクステント）</text>
    </g>
    
    <!-- 大規模段階 -->
    <g transform="translate(0, 200)">
      <text x="0" y="15" font-size="14" fill="#2c3e50" font-weight="bold">大規模テーブル</text>
      <rect x="0" y="25" width="800" height="50" fill="#ecf0f1" rx="8" filter="url(#shadow)"/>
      <g transform="translate(10, 35)">
        <rect x="0" y="0" width="60" height="30" fill="url(#extentGrad1)" rx="5"/>
        <rect x="65" y="0" width="60" height="30" fill="url(#extentGrad1)" rx="5"/>
        <rect x="130" y="0" width="60" height="30" fill="url(#extentGrad1)" rx="5"/>
        <rect x="195" y="0" width="60" height="30" fill="url(#extentGrad1)" rx="5"/>
        <rect x="260" y="0" width="60" height="30" fill="url(#extentGrad1)" rx="5"/>
        <text x="340" y="20" font-size="14" fill="#2c3e50">... 数百エクステント</text>
      </g>
      <text x="600" y="55" font-size="12" fill="#e74c3c">自動拡張によりエクステント追加</text>
    </g>
  </g>
  
  <!-- エクステント管理のメリット -->
  <g transform="translate(50, 520)">
    <rect width="380" height="150" fill="#e8f6f3" rx="15" filter="url(#shadow)"/>
    <text x="190" y="25" text-anchor="middle" font-size="18" fill="#27ae60" font-weight="bold">
      エクステント管理のメリット
    </text>
    <text x="20" y="55" font-size="14" fill="#2c3e50">✓ 連続した領域確保でシーケンシャルI/O向上</text>
    <text x="20" y="80" font-size="14" fill="#2c3e50">✓ 領域割り当ての頻度削減</text>
    <text x="20" y="105" font-size="14" fill="#2c3e50">✓ メタデータ管理の効率化</text>
    <text x="20" y="130" font-size="14" fill="#2c3e50">✓ 断片化の抑制</text>
  </g>
  
  <!-- 実装による違い -->
  <g transform="translate(470, 520)">
    <rect width="380" height="150" fill="#fef9e7" rx="15" filter="url(#shadow)"/>
    <text x="190" y="25" text-anchor="middle" font-size="18" fill="#f39c12" font-weight="bold">
      製品別エクステントサイズ
    </text>
    <text x="20" y="55" font-size="14" fill="#2c3e50">📊 MySQL InnoDB: 1MB (64ページ × 16KB)</text>
    <text x="20" y="80" font-size="14" fill="#2c3e50">📊 PostgreSQL: 1MB単位でファイル拡張</text>
    <text x="20" y="105" font-size="14" fill="#2c3e50">📊 Oracle: 可変 (64KB〜数MB)</text>
    <text x="20" y="130" font-size="14" fill="#2c3e50">📊 SQL Server: 64KB (8ページ × 8KB)</text>
  </g>
</svg>