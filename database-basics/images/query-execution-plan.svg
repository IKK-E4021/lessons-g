<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <title>クエリ実行計画の例</title>
  
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    クエリ実行計画の流れ
  </text>
  
  <!-- SQL Query Box -->
  <g transform="translate(400, 70)">
    <rect x="-150" y="0" width="300" height="50" fill="#34495e" stroke="#2c3e50" stroke-width="2"/>
    <text x="0" y="20" font-family="monospace" font-size="12" text-anchor="middle" fill="white">SELECT * FROM orders o</text>
    <text x="0" y="35" font-family="monospace" font-size="12" text-anchor="middle" fill="white">JOIN customers c ON o.customer_id = c.id</text>
  </g>
  
  <!-- Execution Plan Tree -->
  
  <!-- Result -->
  <g transform="translate(400, 170)">
    <rect x="-80" y="0" width="160" height="40" fill="#e74c3c" stroke="#2c3e50" stroke-width="2"/>
    <text x="0" y="15" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">結果セット</text>
    <text x="0" y="30" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">推定行数: 1000</text>
  </g>
  
  <!-- Hash Join -->
  <g transform="translate(400, 250)">
    <rect x="-80" y="0" width="160" height="50" fill="#3498db" stroke="#2c3e50" stroke-width="2"/>
    <text x="0" y="20" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Hash Join</text>
    <text x="0" y="35" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Cost: 250</text>
    <text x="0" y="45" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">条件: o.customer_id = c.id</text>
  </g>
  
  <!-- Table Scan Orders -->
  <g transform="translate(250, 350)">
    <rect x="-80" y="0" width="160" height="50" fill="#2ecc71" stroke="#2c3e50" stroke-width="2"/>
    <text x="0" y="20" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Table Scan</text>
    <text x="0" y="35" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">テーブル: orders</text>
    <text x="0" y="45" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">推定行数: 5000</text>
  </g>
  
  <!-- Index Scan Customers -->
  <g transform="translate(550, 350)">
    <rect x="-80" y="0" width="160" height="50" fill="#f39c12" stroke="#2c3e50" stroke-width="2"/>
    <text x="0" y="20" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Index Scan</text>
    <text x="0" y="35" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">テーブル: customers</text>
    <text x="0" y="45" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">インデックス: idx_customer_id</text>
  </g>
  
  <!-- Connections -->
  <line x1="400" y1="210" x2="400" y2="250" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="350" y1="300" x2="290" y2="350" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="450" y1="300" x2="510" y2="350" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50"/>
    </marker>
  </defs>
  
  <!-- Cost Analysis -->
  <g transform="translate(400, 450)">
    <rect x="-180" y="0" width="360" height="120" fill="white" stroke="#2c3e50" stroke-width="1" rx="5"/>
    <text x="0" y="20" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">コスト分析</text>
    
    <text x="-160" y="40" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">• Table Scan (orders): Cost = 100</text>
    <text x="-160" y="60" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">• Index Scan (customers): Cost = 50</text>
    <text x="-160" y="80" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">• Hash Join: Cost = 100</text>
    <text x="-160" y="100" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#e74c3c">総コスト: 250</text>
  </g>
  
  <!-- Legend -->
  <g transform="translate(50, 150)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2c3e50">凡例:</text>
    
    <rect x="0" y="10" width="15" height="15" fill="#e74c3c"/>
    <text x="20" y="22" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">結果</text>
    
    <rect x="0" y="30" width="15" height="15" fill="#3498db"/>
    <text x="20" y="42" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">結合操作</text>
    
    <rect x="0" y="50" width="15" height="15" fill="#2ecc71"/>
    <text x="20" y="62" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">フルスキャン</text>
    
    <rect x="0" y="70" width="15" height="15" fill="#f39c12"/>
    <text x="20" y="82" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">インデックススキャン</text>
  </g>
</svg>