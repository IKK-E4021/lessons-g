<svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
    <!-- 背景 -->
    <rect width="1400" height="900" fill="#f8f9fa"/>

    <!-- タイトル -->
    <text x="700" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#2c3e50">分散型ID（DID）の技術構造とエコシステム</text>

    <!-- DIDの構造説明 -->
    <g id="did-structure">
        <rect x="50" y="70" width="600" height="120" fill="#e8f5e8" stroke="#388e3c" stroke-width="2" rx="10"/>
        <text x="350" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#388e3c">DIDの構造と特徴</text>

        <!-- DID例 -->
        <rect x="80" y="110" width="540" height="40" fill="white" stroke="#388e3c" stroke-width="1" rx="5"/>
        <text x="100" y="125" font-family="Arial, sans-serif" font-size="12" fill="#666">例:</text>
        <text x="130" y="125" font-family="Monaco, monospace" font-size="14" font-weight="bold" fill="#d32f2f">did</text>
        <text x="160" y="125" font-family="Arial, sans-serif" font-size="12" fill="#666">:</text>
        <text x="170" y="125" font-family="Monaco, monospace" font-size="14" font-weight="bold" fill="#1976d2">example</text>
        <text x="230" y="125" font-family="Arial, sans-serif" font-size="12" fill="#666">:</text>
        <text x="240" y="125" font-family="Monaco, monospace" font-size="14" font-weight="bold" fill="#f57c00">123456789abcdefghi</text>

        <text x="130" y="140" font-family="Arial, sans-serif" font-size="10" fill="#666">プロトコル</text>
        <text x="180" y="140" font-family="Arial, sans-serif" font-size="10" fill="#666">メソッド</text>
        <text x="280" y="140" font-family="Arial, sans-serif" font-size="10" fill="#666">識別子</text>

        <!-- 特徴 -->
        <text x="80" y="170" font-family="Arial, sans-serif" font-size="11" fill="#333">✓ 永続性　✓ 解決可能性　✓ 暗号学的検証可能性　✓ 分散性</text>
    </g>

    <!-- DIDメソッドの例 -->
    <g id="did-methods">
        <rect x="700" y="70" width="650" height="120" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="10"/>
        <text x="1025" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#f57c00">主要なDIDメソッド</text>

        <text x="720" y="120" font-family="Arial, sans-serif" font-size="12" fill="#333">• did:ethr (イーサリアム)</text>
        <text x="720" y="140" font-family="Arial, sans-serif" font-size="12" fill="#333">• did:ion (ビットコインベース)</text>
        <text x="720" y="160" font-family="Arial, sans-serif" font-size="12" fill="#333">• did:web (既存ウェブドメイン)</text>

        <text x="1020" y="120" font-family="Arial, sans-serif" font-size="12" fill="#333">• did:key (公開鍵ベース)</text>
        <text x="1020" y="140" font-family="Arial, sans-serif" font-size="12" fill="#333">• did:peer (ピアツーピア)</text>
        <text x="1020" y="160" font-family="Arial, sans-serif" font-size="12" fill="#333">• did:sov (Sovrin)</text>
    </g>

    <!-- メインエコシステム -->
    <g id="main-ecosystem">
        <!-- VC/VPエコシステム -->
        <g id="vc-ecosystem">
            <rect x="50" y="220" width="850" height="300" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="10"/>
            <text x="475" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1976d2">VC/VP エコシステム</text>

            <!-- 発行者 (Issuer) -->
            <g id="issuer">
                <rect x="80" y="270" width="120" height="80" fill="#42a5f5" stroke="#1976d2" stroke-width="2" rx="5"/>
                <text x="140" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">発行者</text>
                <text x="140" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">(Issuer)</text>
                <text x="140" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">大学・企業</text>
                <text x="140" y="342" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">行政機関</text>
            </g>

            <!-- 所有者 (Holder) -->
            <g id="holder">
                <circle cx="475" cy="370" r="50" fill="#1e88e5" stroke="#1976d2" stroke-width="3"/>
                <text x="475" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">所有者</text>
                <text x="475" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">(Holder)</text>
                <text x="475" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#333">ユーザー</text>
            </g>

            <!-- 検証者 (Verifier) -->
            <g id="verifier">
                <rect x="720" y="270" width="120" height="80" fill="#1565c0" stroke="#1976d2" stroke-width="2" rx="5"/>
                <text x="780" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">検証者</text>
                <text x="780" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">(Verifier)</text>
                <text x="780" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">サービス</text>
                <text x="780" y="342" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">プロバイダー</text>
            </g>

            <!-- VC発行フロー -->
            <path d="M 200 310 Q 300 280 425 340" fill="none" stroke="#1976d2" stroke-width="3" marker-end="url(#arrowhead-blue)"/>
            <text x="280" y="275" font-family="Arial, sans-serif" font-size="11" fill="#1976d2" font-weight="bold">VC発行</text>
            <text x="270" y="290" font-family="Arial, sans-serif" font-size="9" fill="#333">デジタル署名</text>

            <!-- VP提示フロー -->
            <path d="M 525 340 Q 620 280 720 310" fill="none" stroke="#388e3c" stroke-width="3" marker-end="url(#arrowhead-green)"/>
            <text x="600" y="275" font-family="Arial, sans-serif" font-size="11" fill="#388e3c" font-weight="bold">VP提示</text>
            <text x="590" y="290" font-family="Arial, sans-serif" font-size="9" fill="#333">選択的開示</text>

            <!-- VC/VPの詳細 -->
            <rect x="250" y="380" width="180" height="60" fill="white" stroke="#1976d2" stroke-width="1" rx="5"/>
            <text x="340" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#1976d2">VC (クレデンシャル)</text>
            <text x="260" y="410" font-family="Arial, sans-serif" font-size="9" fill="#333">• 発行者情報</text>
            <text x="260" y="422" font-family="Arial, sans-serif" font-size="9" fill="#333">• クレーム（「20歳以上」等）</text>
            <text x="260" y="434" font-family="Arial, sans-serif" font-size="9" fill="#333">• デジタル署名</text>

            <rect x="470" y="380" width="180" height="60" fill="white" stroke="#388e3c" stroke-width="1" rx="5"/>
            <text x="560" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#388e3c">VP (プレゼンテーション)</text>
            <text x="480" y="410" font-family="Arial, sans-serif" font-size="9" fill="#333">• 選択されたVC</text>
            <text x="480" y="422" font-family="Arial, sans-serif" font-size="9" fill="#333">• 提示コンテキスト</text>
            <text x="480" y="434" font-family="Arial, sans-serif" font-size="9" fill="#333">• 所有者署名</text>

            <!-- 信頼の三角形 -->
            <path d="M 140 270 L 780 270" fill="none" stroke="#ccc" stroke-width="1" stroke-dasharray="3,3"/>
            <text x="450" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">信頼関係</text>
        </g>

        <!-- DIDドキュメントとウォレット -->
        <g id="did-document-wallet">
            <rect x="950" y="220" width="400" height="300" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="10"/>
            <text x="1150" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#7b1fa2">DIDドキュメント &amp; ウォレット</text>

            <!-- デジタルウォレット -->
            <rect x="970" y="270" width="160" height="100" fill="#9c27b0" stroke="#7b1fa2" stroke-width="2" rx="5"/>
            <text x="1050" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">デジタルウォレット</text>
            <text x="980" y="310" font-family="Arial, sans-serif" font-size="9" fill="white">• 秘密鍵管理</text>
            <text x="980" y="322" font-family="Arial, sans-serif" font-size="9" fill="white">• DID生成</text>
            <text x="980" y="334" font-family="Arial, sans-serif" font-size="9" fill="white">• VC保管</text>
            <text x="980" y="346" font-family="Arial, sans-serif" font-size="9" fill="white">• VP作成</text>
            <text x="980" y="358" font-family="Arial, sans-serif" font-size="9" fill="white">• ノンカストディアル</text>

            <!-- DIDドキュメント -->
            <rect x="1150" y="270" width="180" height="120" fill="white" stroke="#7b1fa2" stroke-width="1" rx="5"/>
            <text x="1240" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#7b1fa2">DIDドキュメント</text>
            <text x="1160" y="300" font-family="Arial, sans-serif" font-size="9" fill="#333">• 公開鍵</text>
            <text x="1160" y="312" font-family="Arial, sans-serif" font-size="9" fill="#333">• 認証方法</text>
            <text x="1160" y="324" font-family="Arial, sans-serif" font-size="9" fill="#333">• サービスエンドポイント</text>
            <text x="1160" y="336" font-family="Arial, sans-serif" font-size="9" fill="#333">• 検証関係</text>
            <text x="1160" y="348" font-family="Arial, sans-serif" font-size="9" fill="#333">• 更新情報</text>
            <text x="1160" y="360" font-family="Arial, sans-serif" font-size="9" fill="#333">• JSON形式</text>
            <text x="1160" y="375" font-family="Arial, sans-serif" font-size="8" fill="#666">DID解決で取得</text>

            <!-- 接続線 -->
            <path d="M 1130 320 L 1150 320" fill="none" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrowhead-purple)"/>

            <!-- ブロックチェーン -->
            <rect x="970" y="400" width="360" height="50" fill="#4a148c" stroke="#7b1fa2" stroke-width="2" rx="5"/>
            <text x="1150" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">ブロックチェーン / 分散台帳</text>
            <text x="1150" y="435" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">信頼の基盤・DID登録・解決</text>

            <!-- ウォレットからブロックチェーンへの線 -->
            <path d="M 1050 370 L 1050 400" fill="none" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrowhead-purple)"/>
        </g>
    </g>

    <!-- OIDCとの統合部分 -->
    <g id="oidc-integration">
        <rect x="50" y="570" width="1300" height="180" fill="#fff8e1" stroke="#f57c00" stroke-width="2" rx="10"/>
        <text x="700" y="600" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#f57c00">DID × OIDC 統合アプローチ</text>

        <!-- SIOP -->
        <g id="siop">
            <rect x="80" y="620" width="250" height="100" fill="#ff9800" stroke="#f57c00" stroke-width="2" rx="5"/>
            <text x="205" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">SIOP</text>
            <text x="205" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Self-Issued OpenID Provider</text>
            <text x="90" y="675" font-family="Arial, sans-serif" font-size="9" fill="white">• ユーザーがIdPとして機能</text>
            <text x="90" y="687" font-family="Arial, sans-serif" font-size="9" fill="white">• ウォレットから直接認証</text>
            <text x="90" y="699" font-family="Arial, sans-serif" font-size="9" fill="white">• 中央集権的IdP不要</text>
            <text x="90" y="711" font-family="Arial, sans-serif" font-size="9" fill="white">• DIDベース認証</text>
        </g>

        <!-- OIDC4VP -->
        <g id="oidc4vp">
            <rect x="350" y="620" width="280" height="100" fill="#ff9800" stroke="#f57c00" stroke-width="2" rx="5"/>
            <text x="490" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">OIDC4VP</text>
            <text x="490" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">OpenID Connect for VP</text>
            <text x="360" y="675" font-family="Arial, sans-serif" font-size="9" fill="white">• OIDCフロー内でVC/VP交換</text>
            <text x="360" y="687" font-family="Arial, sans-serif" font-size="9" fill="white">• 標準的な認証フロー</text>
            <text x="360" y="699" font-family="Arial, sans-serif" font-size="9" fill="white">• 選択的属性情報提示</text>
            <text x="360" y="711" font-family="Arial, sans-serif" font-size="9" fill="white">• 既存システム統合容易</text>
        </g>

        <!-- OIDC4VC -->
        <g id="oidc4vc">
            <rect x="650" y="620" width="250" height="100" fill="#ff9800" stroke="#f57c00" stroke-width="2" rx="5"/>
            <text x="775" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">OIDC4VC</text>
            <text x="775" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">OpenID Connect for VC</text>
            <text x="660" y="675" font-family="Arial, sans-serif" font-size="9" fill="white">• VC発行フロー標準化</text>
            <text x="660" y="687" font-family="Arial, sans-serif" font-size="9" fill="white">• OAuth2.0ベース</text>
            <text x="660" y="699" font-family="Arial, sans-serif" font-size="9" fill="white">• 発行者とウォレット連携</text>
            <text x="660" y="711" font-family="Arial, sans-serif" font-size="9" fill="white">• セキュアなVC配布</text>
        </g>

        <!-- DID統合 -->
        <g id="did-integration">
            <rect x="920" y="620" width="280" height="100" fill="#ff9800" stroke="#f57c00" stroke-width="2" rx="5"/>
            <text x="1060" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">DID統合</text>
            <text x="1060" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">IdP DID/VCサポート</text>
            <text x="930" y="675" font-family="Arial, sans-serif" font-size="9" fill="white">• 既存IdPのDID対応</text>
            <text x="930" y="687" font-family="Arial, sans-serif" font-size="9" fill="white">• VC発行・検証機能</text>
            <text x="930" y="699" font-family="Arial, sans-serif" font-size="9" fill="white">• 段階的移行支援</text>
            <text x="930" y="711" font-family="Arial, sans-serif" font-size="9" fill="white">• ハイブリッドアプローチ</text>
        </g>
    </g>

    <!-- 統合を示す矢印 -->
    <path d="M 475 520 Q 500 545 490 570" fill="none" stroke="#f57c00" stroke-width="3" marker-end="url(#arrowhead-orange)" stroke-dasharray="5,5"/>
    <path d="M 1150 520 Q 1100 545 775 570" fill="none" stroke="#f57c00" stroke-width="3" marker-end="url(#arrowhead-orange)" stroke-dasharray="5,5"/>

    <!-- メリットと課題 -->
    <g id="benefits-challenges">
        <rect x="50" y="780" width="600" height="100" fill="#e8f5e8" stroke="#388e3c" stroke-width="2" rx="10"/>
        <text x="350" y="805" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#388e3c">主なメリット</text>
        <text x="70" y="825" font-family="Arial, sans-serif" font-size="12" fill="#333">✓ プライバシー向上（選択的開示）</text>
        <text x="70" y="845" font-family="Arial, sans-serif" font-size="12" fill="#333">✓ セキュリティ向上（分散化）</text>
        <text x="70" y="865" font-family="Arial, sans-serif" font-size="12" fill="#333">✓ 自己主権性の確立</text>

        <text x="350" y="825" font-family="Arial, sans-serif" font-size="12" fill="#333">✓ アイデンティティポータビリティ</text>
        <text x="350" y="845" font-family="Arial, sans-serif" font-size="12" fill="#333">✓ ベンダーロックイン回避</text>
        <text x="350" y="865" font-family="Arial, sans-serif" font-size="12" fill="#333">✓ 大規模漏洩リスク軽減</text>

        <rect x="750" y="780" width="600" height="100" fill="#ffebee" stroke="#d32f2f" stroke-width="2" rx="10"/>
        <text x="1050" y="805" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#d32f2f">現状の課題</text>
        <text x="770" y="825" font-family="Arial, sans-serif" font-size="12" fill="#333">⚠ 技術の複雑性</text>
        <text x="770" y="845" font-family="Arial, sans-serif" font-size="12" fill="#333">⚠ 普及・標準化途上</text>
        <text x="770" y="865" font-family="Arial, sans-serif" font-size="12" fill="#333">⚠ ユーザー教育の必要性</text>

        <text x="1050" y="825" font-family="Arial, sans-serif" font-size="12" fill="#333">⚠ 秘密鍵管理責任</text>
        <text x="1050" y="845" font-family="Arial, sans-serif" font-size="12" fill="#333">⚠ エコシステム未成熟</text>
        <text x="1050" y="865" font-family="Arial, sans-serif" font-size="12" fill="#333">⚠ 相互運用性の課題</text>
    </g>

    <!-- 矢印のマーカー定義 -->
    <defs>
        <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#1976d2"/>
        </marker>
        <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#388e3c"/>
        </marker>
        <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#f57c00"/>
        </marker>
        <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#7b1fa2"/>
        </marker>
    </defs>
</svg>