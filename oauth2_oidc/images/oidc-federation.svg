<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7"
                refX="0" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#2563eb" />
        </marker>
        <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
            <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
        </filter>
    </defs>

    <!-- Background -->
    <rect width="800" height="600" fill="#f8fafc"/>

    <!-- Title -->
    <text x="400" y="30" text-anchor="middle" class="title" fill="#1e293b" font-family="Arial, sans-serif" font-size="20" font-weight="bold">
        OpenID Connect Federation 信頼関係の構築
    </text>

    <!-- Trust Anchor (中央) -->
    <g transform="translate(400, 200)">
        <circle cx="0" cy="0" r="50" fill="#059669" stroke="#047857" stroke-width="3" filter="url(#shadow)"/>
        <text x="0" y="-5" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Trust</text>
        <text x="0" y="8" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Anchor</text>
        <!-- Shield icon -->
        <path d="M-15,-20 L0,-30 L15,-20 L15,0 Q15,10 0,15 Q-15,10 -15,0 Z" fill="white" opacity="0.8"/>
    </g>

    <!-- OpenID Providers (OP) -->
    <!-- University OP -->
    <g transform="translate(150, 120)">
        <rect x="-40" y="-25" width="80" height="50" rx="8" fill="#3b82f6" stroke="#2563eb" stroke-width="2" filter="url(#shadow)"/>
        <text x="0" y="-8" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">University</text>
        <text x="0" y="5" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">OP</text>
        <text x="0" y="40" text-anchor="middle" fill="#374151" font-family="Arial, sans-serif" font-size="9">学術機関</text>
    </g>

    <!-- Government OP -->
    <g transform="translate(650, 120)">
        <rect x="-40" y="-25" width="80" height="50" rx="8" fill="#3b82f6" stroke="#2563eb" stroke-width="2" filter="url(#shadow)"/>
        <text x="0" y="-8" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Government</text>
        <text x="0" y="5" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">OP</text>
        <text x="0" y="40" text-anchor="middle" fill="#374151" font-family="Arial, sans-serif" font-size="9">政府機関</text>
    </g>

    <!-- Enterprise OP -->
    <g transform="translate(300, 350)">
        <rect x="-40" y="-25" width="80" height="50" rx="8" fill="#3b82f6" stroke="#2563eb" stroke-width="2" filter="url(#shadow)"/>
        <text x="0" y="-8" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Enterprise</text>
        <text x="0" y="5" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">OP</text>
        <text x="0" y="40" text-anchor="middle" fill="#374151" font-family="Arial, sans-serif" font-size="9">企業</text>
    </g>

    <!-- Relying Parties (RP) -->
    <!-- Research Platform RP -->
    <g transform="translate(150, 280)">
        <rect x="-40" y="-25" width="80" height="50" rx="8" fill="#dc2626" stroke="#b91c1c" stroke-width="2" filter="url(#shadow)"/>
        <text x="0" y="-8" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Research</text>
        <text x="0" y="5" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">RP</text>
        <text x="0" y="40" text-anchor="middle" fill="#374151" font-family="Arial, sans-serif" font-size="9">研究プラット</text>
        <text x="0" y="52" text-anchor="middle" fill="#374151" font-family="Arial, sans-serif" font-size="9">フォーム</text>
    </g>

    <!-- Business Service RP -->
    <g transform="translate(650, 280)">
        <rect x="-40" y="-25" width="80" height="50" rx="8" fill="#dc2626" stroke="#b91c1c" stroke-width="2" filter="url(#shadow)"/>
        <text x="0" y="-8" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Business</text>
        <text x="0" y="5" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">RP</text>
        <text x="0" y="40" text-anchor="middle" fill="#374151" font-family="Arial, sans-serif" font-size="9">ビジネス</text>
        <text x="0" y="52" text-anchor="middle" fill="#374151" font-family="Arial, sans-serif" font-size="9">サービス</text>
    </g>

    <!-- E-Government Service RP -->
    <g transform="translate(500, 350)">
        <rect x="-40" y="-25" width="80" height="50" rx="8" fill="#dc2626" stroke="#b91c1c" stroke-width="2" filter="url(#shadow)"/>
        <text x="0" y="-8" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">eGov</text>
        <text x="0" y="5" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">RP</text>
        <text x="0" y="40" text-anchor="middle" fill="#374151" font-family="Arial, sans-serif" font-size="9">電子政府</text>
        <text x="0" y="52" text-anchor="middle" fill="#374151" font-family="Arial, sans-serif" font-size="9">サービス</text>
    </g>

    <!-- Trust lines from Trust Anchor to OPs/RPs -->
    <line x1="360" y1="170" x2="190" y2="140" stroke="#059669" stroke-width="3" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
    <line x1="440" y1="170" x2="610" y2="140" stroke="#059669" stroke-width="3" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
    <line x1="370" y1="230" x2="330" y2="330" stroke="#059669" stroke-width="3" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>

    <line x1="360" y1="230" x2="190" y2="260" stroke="#059669" stroke-width="3" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
    <line x1="440" y1="230" x2="610" y2="260" stroke="#059669" stroke-width="3" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
    <line x1="430" y1="230" x2="470" y2="330" stroke="#059669" stroke-width="3" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>

    <!-- Authentication flow examples -->
    <line x1="190" y1="160" x2="190" y2="240" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="610" y1="160" x2="610" y2="240" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Metadata signature flow -->
    <g transform="translate(80, 450)">
        <rect x="0" y="0" width="640" height="120" rx="10" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="2"/>
        <text x="20" y="25" fill="#374151" font-family="Arial, sans-serif" font-size="14" font-weight="bold">メタデータ署名・検証フロー</text>

        <!-- Step boxes -->
        <g transform="translate(20, 40)">
            <rect x="0" y="0" width="120" height="30" rx="5" fill="#dbeafe" stroke="#2563eb"/>
            <text x="60" y="20" text-anchor="middle" fill="#1e40af" font-family="Arial, sans-serif" font-size="10">1. メタデータ公開</text>
        </g>

        <g transform="translate(160, 40)">
            <rect x="0" y="0" width="120" height="30" rx="5" fill="#dcfce7" stroke="#059669"/>
            <text x="60" y="20" text-anchor="middle" fill="#047857" font-family="Arial, sans-serif" font-size="10">2. Trust Anchor署名</text>
        </g>

        <g transform="translate(300, 40)">
            <rect x="0" y="0" width="120" height="30" rx="5" fill="#fed7d7" stroke="#dc2626"/>
            <text x="60" y="20" text-anchor="middle" fill="#b91c1c" font-family="Arial, sans-serif" font-size="10">3. RP署名検証</text>
        </g>

        <g transform="translate(440, 40)">
            <rect x="0" y="0" width="120" height="30" rx="5" fill="#fef3c7" stroke="#d97706"/>
            <text x="60" y="20" text-anchor="middle" fill="#b45309" font-family="Arial, sans-serif" font-size="10">4. 信頼関係確立</text>
        </g>

        <!-- Arrows between steps -->
        <line x1="145" y1="55" x2="155" y2="55" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
        <line x1="285" y1="55" x2="295" y2="55" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
        <line x1="425" y1="55" x2="435" y2="55" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
    </g>

    <!-- Legend -->
    <g transform="translate(50, 50)">
        <text x="0" y="0" fill="#374151" font-family="Arial, sans-serif" font-size="12" font-weight="bold">凡例</text>
        <g transform="translate(0, 15)">
            <rect x="0" y="0" width="15" height="10" fill="#3b82f6"/>
            <text x="20" y="8" fill="#374151" font-family="Arial, sans-serif" font-size="10">OpenID Provider (OP)</text>
        </g>
        <g transform="translate(0, 30)">
            <rect x="0" y="0" width="15" height="10" fill="#dc2626"/>
            <text x="20" y="8" fill="#374151" font-family="Arial, sans-serif" font-size="10">Relying Party (RP)</text>
        </g>
        <g transform="translate(0, 45)">
            <line x1="0" y1="5" x2="15" y2="5" stroke="#059669" stroke-width="2" stroke-dasharray="3,3"/>
            <text x="20" y="8" fill="#374151" font-family="Arial, sans-serif" font-size="10">信頼関係</text>
        </g>
        <g transform="translate(0, 60)">
            <line x1="0" y1="5" x2="15" y2="5" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrowhead)"/>
            <text x="20" y="8" fill="#374151" font-family="Arial, sans-serif" font-size="10">認証フロー</text>
        </g>
    </g>

    <!-- Key benefits box -->
    <g transform="translate(520, 50)">
        <rect x="0" y="0" width="200" height="80" rx="8" fill="#ecfdf5" stroke="#059669" stroke-width="2"/>
        <text x="10" y="20" fill="#047857" font-family="Arial, sans-serif" font-size="12" font-weight="bold">主要なメリット</text>
        <text x="10" y="35" fill="#374151" font-family="Arial, sans-serif" font-size="9">• 事前設定なしの信頼関係構築</text>
        <text x="10" y="48" fill="#374151" font-family="Arial, sans-serif" font-size="9">• 大規模環境での管理効率化</text>
        <text x="10" y="61" fill="#374151" font-family="Arial, sans-serif" font-size="9">• 動的な組織間連携の実現</text>
        <text x="10" y="74" fill="#374151" font-family="Arial, sans-serif" font-size="9">• 標準化による相互運用性</text>
    </g>
</svg>